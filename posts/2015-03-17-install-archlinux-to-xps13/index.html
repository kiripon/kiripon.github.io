<!doctype html><html lang=ja-jp><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no"><title>Arch Linux を Dell XPS 13(2015)へインストールする | 自由研究帳</title><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#ff3db4><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://kiripon.net/css/main.min.975b1911c008aee6ab5fb42e51274b8268ebcb65dc15bd4a5f69b9eedb485c3e.css><link type=text/css rel=stylesheet href=/css/custom.css><script>MathJax={loader:{load:['[tex]/amscd']},tex:{inlineMath:[['$','$'],['\\(','\\)']],processEscapes:true,tags:'ams',macros:{ssqrt:['\\sqrt{\\smash[b]{\\mathstrut #1}}',1],tcdegree:['\\unicode{xb0}'],tccelsius:['\\unicode{x2103}'],tcperthousand:['\\unicode{x2030}'],tcmu:['\\unicode{x3bc}'],tcohm:['\\unicode{x3a9}']},packages:{'[+]':['amsCd']}},chtml:{matchFontHeight:false,displayAlign:"left",displayIndent:"2em"}};</script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script></head><body><nav><header><div class=site-title><a href=/>自由研究帳</a></div></header><div class=nav-menu><a class="color-link nav-link" href=/about/>About</a>
<a class="color-link nav-link" href=/tags/>Tags</a>
<a class="color-link nav-link" href=/archives/>Archives</a>
<a class="color-link nav-link" href=https://kiripon.net/index.xml target=_blank rel=noopener type=application/rss+xml>RSS</a></div><footer class=footer><div class=social-icons></div><p><a href=https://github.com/kimcc/hugo-theme-noteworthy target=_blank rel=noopener>Noteworthy theme</a></p><p><a href=https://gohugo.io target=_blank rel=noopener>Built with Hugo</a></p><script src=https://kiripon.net/js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww=" crossorigin=anonymous></script></footer></nav><div id=content class=content-container><h1 class=post-title>Arch Linux を Dell XPS 13(2015)へインストールする</h1><time>March 17, 2015</time><div><p><h1 id=経緯>経緯</h1><p><a href=http://www.dell.com/jp/p/xps-13-9343-laptop/pd>Dell XPS 13</a>を購入した.(とてもうれしい)
早速Arch Linux をインストールすることにしたが、配布されている ISO イメージでは，無線LANが認識されなかった．
そのためドライバがインストール済みのISOイメージを作成することにした．</p><p>#必要なドライバの確認
<code>lspci</code>コマンドで無線モジュールを確認する。</p><pre><code># lspci
...
02:00.0 Network controller: Broadcom Corporation BCM4352 802.11ac Wireless Network Adapter (rev 03)
</code></pre><p>調べたところ、<code>BCM4352</code>は
<a href=https://aur.archlinux.org/packages/broadcom-wl-dkms/>broadcom-wl-dkms(AUR)</a>
を利用することで利用できるらしい。こいつを予め導入したインストールイメージをつくる。</p><h1 id=isoイメージの作成>ISOイメージの作成</h1><p><a href=https://wiki.archlinux.org/index.php/Archiso>Archiso(Arch Wiki)</a>に則って インストールイメージを作成する。
その際に、以下の変更を行った。</p><p><code>yaourt</code>を使うため、<code>pacman.conf</code>の末尾に以下を追加</p><pre><code>[archlinuxfr]
SigLevel = Never
Server = http://repo.archlinux.fr/$arch
</code></pre><p><code>packages.both</code>の末尾に以下を追加</p><pre><code>linux-headers
dkms
fakeroot
yaourt
</code></pre><p><code>airootfs/root/customize_airootfs.sh</code>に以下を追加</p><pre><code># root で yaourt が実行できないのでユーザー権限で実行
sudo -u arch yaourt --noconfirm -S broadcom-wl-dkms
</code></pre><h1 id=install>Install</h1><p>UEFI環境でSecure Bootを有効にしたまま起動するとHash Toolが起動する。
その時はArch Wikiの
<a href=https://wiki.archlinux.org/index.php/Unified_Extensible_Firmware_Interface#Secure_Boot>Unified Extensible Firmware Interface</a>
の通りの手順を踏むと起動できる。</p><p>これで無線LANが有効になった状態で起動できるので、<code>wifi-menu</code>等で無線LANに繋いで通常のインストール手順をふめばよい。</p><h1 id=問題点>問題点</h1><p><del>スピーカーから音が出ない。
<a href=https://major.io/2015/02/03/linux-support-dell-xps-13-9343-2015-model/>ここ</a>とかを見る限り、いまのところ根本的な解決はないらしい。続報に期待</del></p><p><del><a href=https://github.com/mpalourdio/xps13>https://github.com/mpalourdio/xps13</a>
を参考にカーネルのブートオプションに<code>acpi_osi="Windows 2013"</code>を追加し、数回再起動したところスピーカーから音が出るようになった。</del></p><p><del>変更後のgummibootのエントリは以下のようになった。</del></p><pre><code>title	Arch Linux
linux	/vmlinuz-linux
initrd	/initramfs-linux.img
options	enable_rc6=1 enable_fbc=1 lvds_downclock=1 pcie_aspm=force psmouse.resetafter=0 acpi_osi=&quot;!Windows 2013&quot; root=/dev/sda7 rw
</code></pre><p><em>5/24追記</em>
BIOS A02 以降からは<code>acpi_osi</code> オプションを指定しなくてもスピーカーが有効になるようになった。</p></p></div><div class=page-footer><hr class=footer-divider><a class=tag href=/tags/arch-linux>#Arch Linux</a></div></div><footer class=footer-mobile><div class=social-icons></div><div class=footer-mobile-links><p><a href=https://github.com/kimcc/hugo-theme-noteworthy target=_blank rel=noopener>Noteworthy theme</a></p><span class=divider-bar>|</span><p><a href=https://gohugo.io target=_blank rel=noopener>Built with Hugo</a></p></div><script src=https://kiripon.net/js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww=" crossorigin=anonymous></script></footer></body></html>