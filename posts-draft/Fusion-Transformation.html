<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>自由研究帳 - 融合変換</title>
        <link rel="stylesheet" type="text/css" href="/css/default.css" />
	<script type="text/javascript" src="//typesquare.com/accessor/script/typesquare.js?3gh7POzSj-0%3D" charset="utf-8"></script>
	
    </head>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-56315243-1', 'auto');
      ga('send', 'pageview');
    </script>
    <body>
        <div id="header">
            <div id="logo">
                <a href="/">自由研究帳</a>
            </div>
            <div id="navigation">
                <a href="/">HOME</a>
                <a href="/about.html">ABOUT</a>
                <a href="/contact.html">CONTACT</a>
                <a href="/archive.html">ARHCIVE</a>
            </div>
        </div>
        <div id="content">
            <h1>融合変換</h1>

            <link rel="stylesheet" type="text/css" href="/css/syntax.css" />
<div class="info">
    Posted on none
    
</div>
<div class="info">
  
  Tags: 融合変換,Haskell
  
</div>

<h2 id="悪いコードと良いコード">悪いコードと良いコード</h2>
<p>1~nまでの数の和を出力する関数をC,Haskellでそれぞれ定義する。</p>
<pre class="sourceCode c"><code class="sourceCode c"><span class="dt">int</span> sumSq(<span class="dt">int</span> n){
<span class="dt">int</span> result = <span class="dv">0</span>;
	<span class="kw">for</span>(<span class="dt">int</span> i = <span class="dv">1</span>;i &lt;= n;i++){
		result += i * i;
	}
	<span class="kw">return</span> result;
}</code></pre>
<pre class="sourceCode haskell"><code class="sourceCode haskell">sumSq n <span class="fu">=</span> sum (map square [<span class="dv">1</span><span class="fu">..</span>n])
square x <span class="fu">=</span> x <span class="fu">*</span> x</code></pre>
<p>Haskellのように書いたプログラムは、Cで書いたプログラムに比べて可読性はとてもいい。 一方で、このプログラムは効率は良くない。 * <code>[1..n]</code> で長さnのリストを生成し、生成したリストを<code>map square</code>関数に渡し、 * <code>[1..n^2]</code> というリストを生成し、さらに<code>sum</code>にこのリストを渡して結果を得る。 得たいものは値だけにもかかわらず、２つもリストを生成していることになる。</p>
<h2 id="変換のステップ">変換のステップ</h2>
<ol type="1">
<li><p>すべての再帰関数をHyloと呼ばれる再帰形式で表す。Hyloは[|φ,η,ψ|]のように表す。再帰関数からHyloを導出する事もできる(らしい) <code>sumSq = sum . map square . enumFromTo 1</code> をHyloを導出した後は、<code>[|φ1,η1,ψ1|] ∘ [|φ2,η2,ψ2|] ∘ [|φ3,η3,ψ3|]</code>のようにかくことができる。</p></li>
<li><p>生成と消費の捕獲 Hyloに対して酸性雨定理とよばれる法則を使って(特定の条件下で)1つのHyloに融合させることができる。</p></li>
<li>酸性雨定理の適用 [|φ1,η1,σ1 out|] ∘ [|τ2 in,η2σ2 out’|] ∘ [|τ3 in’,η3,ψ3|]</li>
<li><p>Hyloの展開 <code>sumSq n = sumSq' (1,n)    where 	sumSq' (m,n) = case (m &gt; n) of 		True -&gt; 0 		False -&gt; square m + sumSq' (m+1,n)</code></p></li>
</ol>
<p>Hyloを展開するとこの形になる。中間データが存在しないから効率的になっていることとは明らか。</p>
<h2 id="hylomorphism">Hylomorphism</h2>
<h3 id="hyloの定義">Hyloの定義</h3>
<p>関数が以下のような再帰的手法で定義される時、これをHyloという。</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">f <span class="fu">=</span> φ ∘ (η ∘ <span class="dt">F</span> f) ∘ ψ</code></pre>
<h3 id="endofunctor">Endofunctor</h3>
<h2 id="変換手法">変換手法</h2>
<p>参考文献</p>
<p><a href="融合変換による関数プログラムの最適化"></a></p>

<br>

<div id="disqus_thread"><div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  // required: replace example with your forum shortname
  var disqus_shortname = 'kiripon';
  
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  // required: replace example with your forum shortname
  var disqus_shortname = 'kiripon';
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
  var s = document.createElement('script'); s.async = true;
  s.type = 'text/javascript';
  s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

        </div>
        <div id="footer">
	  <p>Copyright(C) 2013-2014, Kiripon</p>
	  <p>Source code font is <a href="https://github.com/i-tu/Hasklig">Hasklig</a>,distributed under <a href="/texts/LICENSE.txt">OFL</a>.</p>
	  <p>Site generated by <a href="http://jaspervdj.be/hakyll">Hakyll</a></p>
        </div>
    </body>
</html>
